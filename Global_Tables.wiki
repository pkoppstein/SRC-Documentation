==Overview==

This page defines a simple relational model for SRC data in terms of just three global tables:

1. legislators.table - a table for legislators
2. rollcalls.table - a table for their votes 
3. rosetta.table - a "Rosetta Stone" for recording a one-to-one mapping between SRC Global IDs and similar "global ids" defined by other authorities.

Additional tables containing data useful for project management may also be useful. One such table is defined here: a table for mapping aliases of a legislator to the SRC Global IDs.

Each relational table can be implemented or represented in a number of ways, e.g. using one or more files. If more than one file is used for any one table, however, it should be possible to derive the full table simply by concatenating the corresponding files.

===Relationship with pty_nol.txt and nomrecord.txt files===
The "legislators" and "rollcalls" tables consolidate the information in "pty_nol.txt" and "nomrecord.txt" files, eliminating the need for localids and the dependence on the "ST/st_cyy/session" directory structure.  However GLOBALID values are derived in part from localid values, as explained below.

===Abbreviations and Conventions===
On this page:
* SRC stands for the "State Roll Call" project
* GID is the SRC global id (this project's global id of a legislator)
* "tsv" stands for "tab-separated values"
* "ftm" is an abbreviation referring to "followthemoney.org"
* "CSMSP" refers to the Center for the Study of Money in State Politics.

In addition:

* lid = local id of a legislator (three digits)
* pid = party id (three digits)
* did = district id (a string without spaces)
* vv = voting vector (as in nomrecord.txt)

Required fields are marked with an asterisk (*).

==Global IDs==
GID = STyyyyCnnn

where:

yyyy is a year (generally the first year in which we have a voting vector, ignoring any legislative days in Nov and Dec)

C is U or L (upper or lower house)

nnn is the corresponding lid

The GID selected for an individual must correspond with an existing lid in the SRC collection of data.


===Current per-session format===

{{{
pty_nol.txt:   lid name pid did
nomrecord.txt: lid name vv
}}}

==SRC Format==

In the following descriptions, the field names are shown separated by spaces.  

In general, the .tsv format is preferred for implementations of any of the tables as files.

===legislators.table===
This table is logically derived from legislator.tsv files.

{{{
FIELDS: GID surname firstname middlenames alt_surnames suffix nickname comment
}}}

Notice that there is no pid. This is because the party id may changed.
Notice also that there is no field for any external global id, but of course the comment field could include references to such ids.s are not included only the global id of the legislator in question.

===rollcalls.table===
This table cconsolidates nomrecord.txt and pty_nol.txt files.
{{{
FIELDS: ST yyyy C SES GID:pid did vv
}}}

This file could be implemented as a .txt file because did has no spaces, but note that both did and vv are of variable lengths, so a fixed-width implementation would be impractical as there are district ids such as:
* Berkshire-Hampden-Hampshire-Franklin

===rosetta.table===
{{{
FIELDS: GID FTM Klarner OpenStates votesmart
}}}

Here:
* FTM is the unique_candidate_id defined by followthemoney.org (aka CSMSP - Center for the Study of Money in State Politics).

* Klarner is the id defined by http://www.indstate.edu/polisci/klarnerpolitics.htm

* OpenStates is the OpenStates leg_id (http://openstates.org/api/legislators)

* votesmart is candidateId used in the URL http://votesmart.org/candidate/biography/#{candidateId} or http://api.votesmart.org/CandidateBio.getBio?key=<your_key>&candidateId=#{candidateId} (see http://api.votesmart.org/docs/Candidates.html)

This table is intended to record the correspondence between GID and "global ids" defined by other authorities.  If an external authority defines more than one id for an individual, then such ids should not be recorded in this table.  The aliases.table format can be used to record the full set of ids defined by an external authority.)

===aliases.table===
{{{
FIELDS: GID alias
}}}

Here, "alias" may contain spaces.

This table defines a many-to-one mapping from aliases to GIDs, e.g.:

  GID ST yyyy C SES lid

The only requirement is that each "alias" will appear only once in the table.

"aliases.table" is a kind of "Rosetta Stone".

===Notes===

1. records in a .tsv file need not have trailing tabs.
2. By convention, DISTRICTID (did) values have no spaces.
3. The chamber code for Nebraska is U (i.e. the value of C for NE is U).

